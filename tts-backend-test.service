[Unit]
Description=Stuart TTS Backend Test
After=network.target

[Service]
Type=simple
WorkingDirectory=/var/www/stuart-test
ExecStart=/usr/bin/node server.js
Restart=always
RestartSec=10
User=ubuntu
Group=ubuntu

# Let the app handle environment loading from .env
Environment=NODE_ENV=development

# Security settings
NoNewPrivileges=true
PrivateTmp=true
ProtectSystem=strict
ReadWritePaths=/var/www/stuart-test/cache /var/www/stuart-test/sessions /var/www/stuart-test/logs /var/www/stuart-test/uploads

# Process settings
StandardOutput=journal
StandardError=journal
SyslogIdentifier=stuart-test

[Install]
WantedBy=multi-user.target